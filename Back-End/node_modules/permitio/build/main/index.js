"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Permit = void 0;
// For Default export
// import { IPermitCache, LocalCacheClient } from './cache/client';
const config_1 = require("./config");
const enforcer_1 = require("./enforcement/enforcer");
const logger_1 = require("./logger");
const client_1 = require("./api/client");
const client_2 = require("./elements/client");
/**
 * Permit.io SDK for Node.js
 *
 * You can use this class to enforce permissions in your app.
 *
 * Usage:
 * const permit = new Permit.init({ ... }); // receives a config object of type IPermitConfig
 * const permitted = await permit.check(user, action, resource);
 */
class _Permit {
    constructor(config) {
        this._config = config_1.ConfigFactory.build(config);
        const logger = logger_1.LoggerFactory.createLogger(this._config);
        this._enforcer = new enforcer_1.Enforcer(this._config, logger);
        // this._cache = new LocalCacheClient(this._config, logger);
        this._api = new client_1.ApiClient(this._config, logger);
        this._elements = new client_2.ElementsClient(this._config, logger);
        logger.debug(`Permit.io SDK initialized with config:\n${JSON.stringify(this._config, undefined, 2)}`);
        Object.assign(this, Object.assign(Object.assign(Object.assign({ 
            // config
            config: Object.freeze(this._config) }, this._enforcer.getMethods()), this._api.getMethods()), this._elements.getMethods()));
    }
}
exports.Permit = _Permit;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUJBQXFCO0FBQ3JCLG1FQUFtRTtBQUNuRSxxQ0FBd0Q7QUFDeEQscURBQTZEO0FBQzdELHFDQUF5QztBQUN6Qyx5Q0FBcUQ7QUFFckQsOENBQXVFO0FBYXZFOzs7Ozs7OztHQVFHO0FBQ0gsTUFBTSxPQUFPO0lBT1gsWUFBWSxNQUF1QztRQUNqRCxJQUFJLENBQUMsT0FBTyxHQUFHLHNCQUFhLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNDLE1BQU0sTUFBTSxHQUFHLHNCQUFhLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4RCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksbUJBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3BELDREQUE0RDtRQUM1RCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksa0JBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSx1QkFBYyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLEtBQUssQ0FDViwyQ0FBMkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUN4RixDQUFDO1FBRUYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJO1lBQ2hCLFNBQVM7WUFDVCxNQUFNLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBR2hDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLEdBQzNCLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQ3RCLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLEVBRTlCLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUFHWSxRQUFBLE1BQU0sR0FBRyxPQUFrRSxDQUFDIn0=