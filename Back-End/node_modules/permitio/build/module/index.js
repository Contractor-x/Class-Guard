// For Default export
// import { IPermitCache, LocalCacheClient } from './cache/client';
import { ConfigFactory } from './config';
import { Enforcer } from './enforcement/enforcer';
import { LoggerFactory } from './logger';
import { ApiClient } from './api/client';
import { ElementsClient } from './elements/client';
/**
 * Permit.io SDK for Node.js
 *
 * You can use this class to enforce permissions in your app.
 *
 * Usage:
 * const permit = new Permit.init({ ... }); // receives a config object of type IPermitConfig
 * const permitted = await permit.check(user, action, resource);
 */
class _Permit {
    constructor(config) {
        this._config = ConfigFactory.build(config);
        const logger = LoggerFactory.createLogger(this._config);
        this._enforcer = new Enforcer(this._config, logger);
        // this._cache = new LocalCacheClient(this._config, logger);
        this._api = new ApiClient(this._config, logger);
        this._elements = new ElementsClient(this._config, logger);
        logger.debug(`Permit.io SDK initialized with config:\n${JSON.stringify(this._config, undefined, 2)}`);
        Object.assign(this, {
            // config
            config: Object.freeze(this._config),
            // exposed methods from specialized clients
            ...this._enforcer.getMethods(),
            ...this._api.getMethods(),
            ...this._elements.getMethods(),
        });
    }
}
export const Permit = _Permit;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEscUJBQXFCO0FBQ3JCLG1FQUFtRTtBQUNuRSxPQUFPLEVBQUUsYUFBYSxFQUFpQixNQUFNLFVBQVUsQ0FBQztBQUN4RCxPQUFPLEVBQUUsUUFBUSxFQUFhLE1BQU0sd0JBQXdCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN6QyxPQUFPLEVBQWMsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBRXJELE9BQU8sRUFBRSxjQUFjLEVBQXNCLE1BQU0sbUJBQW1CLENBQUM7QUFhdkU7Ozs7Ozs7O0dBUUc7QUFDSCxNQUFNLE9BQU87SUFPWCxZQUFZLE1BQXVDO1FBQ2pELElBQUksQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMzQyxNQUFNLE1BQU0sR0FBRyxhQUFhLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4RCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDcEQsNERBQTREO1FBQzVELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksY0FBYyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDMUQsTUFBTSxDQUFDLEtBQUssQ0FDViwyQ0FBMkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUN4RixDQUFDO1FBRUYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUU7WUFDbEIsU0FBUztZQUNULE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7WUFFbkMsMkNBQTJDO1lBQzNDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUU7WUFDOUIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUN6QixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFO1NBRS9CLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQUdELE1BQU0sQ0FBQyxNQUFNLE1BQU0sR0FBRyxPQUFrRSxDQUFDIn0=