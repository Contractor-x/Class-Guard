"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const ava_1 = __importDefault(require("ava"));
const index_1 = require("./index");
ava_1.default('paths are processed correctly', async () => {
    const permit = new index_1.Permit({
        token: 'PJUKkuwiJkKxbIoC4o4cguWxB_2gX6MyATYKc2OCM',
    });
    // code example:
    // const [user, created] = await permit.api.createUser({
    //   key: 'asaf@permit.io',
    //   attributes: { name: 'asaf', age: '35' },
    // });
    // permit.resource({
    //   name: 'task',
    //   description: 'Todo Task',
    //   type: 'rest',
    //   path: '/api/v1/boards/:listId/tasks',
    //   actions: [
    //     permit.action({
    //       name: 'list',
    //       title: 'List',
    //       description: 'list all tasks',
    //       path: '/api/v1/boards/:listId/tasks',
    //       attributes: {
    //         verb: 'GET',
    //       },
    //     }),
    //     permit.action({
    //       name: 'retrieve',
    //       title: 'Retrieve',
    //       description: 'Retrieve task details',
    //       path: '/api/v1/boards/:listId/tasks/:taskId',
    //       attributes: {
    //         verb: 'GET',
    //       },
    //     }),
    //   ],
    // });
    // await permit.write(
    //   permit.api.createTenant({ key: 'tenant1', name: 'My First Tenant' }),
    //   permit.api.assignRole('mysuperid', 'Admin', 'tenant1'),
    // );
    // TODO: when we support zanzibar
    // await permit.write(
    //   permit.relationships({
    //     tuples: [
    //       { user: 'alice', relation: 'reader', object: 'document:A'},
    //       { user: 'bob', relation: 'reader', object: 'document:B'},
    //       { user: 'charlie', relation: 'reader', object: 'document:C'},
    //     ]
    //   })
    // );
    // const context = permit.getUrlContext("/api/v1/boards/b1/tasks/t1", "GET");
    // if (!context) {
    //   return;
    // }
    // const { resource, action } = context;
    // permit.check({ key: "u1" }, action, resource);
    // permit.save((api: IPermitCloudMutations): Promise<any> => {
    //   return Promise.all([
    //     api.createTenant({key: "teannt1", name: "Ten 1"}),
    //     api.assignRole("uk", "admin", "tk"),
    //   ]);
    // });
    // t.is(resourceRegistry.paths.length, 2);
    // const result = resourceRegistry.getResourceAndActionFromRequestParams("/api/v1/boards/2/tasks/25");
    // t.is(result?.resource.name, 'task');
    // t.is(result?.resource.context['listId'], '2');
    // t.is(result?.resource.context['taskId'], '25');
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2FuaXR5LnNwZWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2FuaXR5LnNwZWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw4Q0FBdUI7QUFFdkIsbUNBQWlDO0FBRWpDLGFBQUksQ0FBQywrQkFBK0IsRUFBRSxLQUFLLElBQUksRUFBRTtJQUc3QyxNQUFNLE1BQU0sR0FBRyxJQUFJLGNBQU0sQ0FBQztRQUN4QixLQUFLLEVBQUUsMkNBQTJDO0tBQ25ELENBQUMsQ0FBQztJQUVILGdCQUFnQjtJQUNoQix3REFBd0Q7SUFDeEQsMkJBQTJCO0lBQzNCLDZDQUE2QztJQUM3QyxNQUFNO0lBRU4sb0JBQW9CO0lBQ3BCLGtCQUFrQjtJQUNsQiw4QkFBOEI7SUFDOUIsa0JBQWtCO0lBQ2xCLDBDQUEwQztJQUMxQyxlQUFlO0lBQ2Ysc0JBQXNCO0lBQ3RCLHNCQUFzQjtJQUN0Qix1QkFBdUI7SUFDdkIsdUNBQXVDO0lBQ3ZDLDhDQUE4QztJQUM5QyxzQkFBc0I7SUFDdEIsdUJBQXVCO0lBQ3ZCLFdBQVc7SUFDWCxVQUFVO0lBQ1Ysc0JBQXNCO0lBQ3RCLDBCQUEwQjtJQUMxQiwyQkFBMkI7SUFDM0IsOENBQThDO0lBQzlDLHNEQUFzRDtJQUN0RCxzQkFBc0I7SUFDdEIsdUJBQXVCO0lBQ3ZCLFdBQVc7SUFDWCxVQUFVO0lBQ1YsT0FBTztJQUNQLE1BQU07SUFFTixzQkFBc0I7SUFDdEIsMEVBQTBFO0lBQzFFLDREQUE0RDtJQUM1RCxLQUFLO0lBRUwsaUNBQWlDO0lBQ2pDLHNCQUFzQjtJQUN0QiwyQkFBMkI7SUFDM0IsZ0JBQWdCO0lBQ2hCLG9FQUFvRTtJQUNwRSxrRUFBa0U7SUFDbEUsc0VBQXNFO0lBQ3RFLFFBQVE7SUFDUixPQUFPO0lBQ1AsS0FBSztJQUVMLDZFQUE2RTtJQUM3RSxrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLElBQUk7SUFDSix3Q0FBd0M7SUFFeEMsaURBQWlEO0lBRWpELDhEQUE4RDtJQUM5RCx5QkFBeUI7SUFDekIseURBQXlEO0lBQ3pELDJDQUEyQztJQUMzQyxRQUFRO0lBQ1IsTUFBTTtJQUVOLDBDQUEwQztJQUMxQyxzR0FBc0c7SUFDdEcsdUNBQXVDO0lBQ3ZDLGlEQUFpRDtJQUNqRCxrREFBa0Q7QUFDcEQsQ0FBQyxDQUFDLENBQUMifQ==